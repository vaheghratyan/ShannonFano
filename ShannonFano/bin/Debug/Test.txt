Introduction
Apple belongs to the heliotrope temperate deciduous tree; due to its crisp fruit and rich nutrition, it is known as the “the crown of fruit.” Because of its high water solubility and easy absorption by the body, it is also called “living water.” Apple ranks second in the global fruit production rankings over grapes, according to the statistics of the Food and Agriculture Organization. Harvesting operation is a time-consuming and labor-intensive process in the production of fruits and vegetables, which is also an important part of the whole agricultural production process. Because some fruits and vegetables are harvested with strong seasonality, there may be intensive harvested operating scenes, resulting in a very large harvesting workload. The harvesting operations are labor-intensive, and it is currently dominated by manual operations, resulting in low efficiency, which, in turn, restricts the market competitiveness of agricultural products. With the rise of other industries, the agricultural labor force has gradually shifted to cities, causing a large number of migrant farmers. With the growing of aging population, resulting in agricultural production the rural labor force resources increasingly tense. The lack of agricultural labor may cause the failure of timely harvesting, thus causing huge losses to agricultural production.

With the advancement of science and technology, it is gradually realizing the mechanization of agricultural production; agricultural production has been transformed into digitization and information, and mechanization in the production process has been developing toward automation and intellectualization. We urgently need to further research on related theory and technology of harvesting robot to achieve harvesting mechanization and automation of operation, reduce the labor intensity of operators, the liberation of more agricultural labor force, compression agricultural production cost, satisfy the requirement of harvesting timely operation, and reduce the economic loss. And the technical research on harvesting robots is conducive to the advancement of China’s agricultural science and technology; it is of great historic significance to accelerate the process of agricultural modernization.

Development history and framework
Development history
In the 1960s, Americans Schertz and Brown first proposed to use machines to harvest citrus fruits,1,2 namely the rudiment of harvesting robot; since then, various types of fruit and vegetable harvesting robot technology research are conducted widely. In 1985, France pioneered the research on apple harvesting robots, and in 1998, they developed a prototype with two robotic arms.3,4 Early recognition of various harvesting robot prototypes for the target fruit and vegetable recognition rate and harvesting efficiency is relatively low, while the apple’s average recognition rate is about 80% and harvesting speed is roughly tens of seconds per piece. Due to the limited technical conditions at the time, research on apple harvesting robots was at a low tide.

With the development of computer technology, control theory, information technology, and other disciplines, the research of various harvesting robots has set off a new research craze. The research on harvesting robots for fruits and vegetables in China started late. In recent years, under the support of the national “863” science and technology project and the National Natural Science Fund, a number of domestic institutions have successively carried out research on various fruit and vegetable harvesting robots, have achieved preliminary results, and have developed some prototypes.

In terms of apple harvesting robots, Belgian scholars developed the autonomous fruit picking machine harvesting robot in 2008 and it reflects the current apple harvesting robot technology development level in the world, its harvesting rate for apples with a diameter of 6–11 cm is about 80%, and the harvesting time is about 9 s.5 In 2009, the apple harvest robot was jointly developed by China Agricultural Machinery Academy and Jiangsu University; the prototype in the laboratory conditions had a harvest rate at about 80% and the harvesting speed was about 15 s/piece.6 The harvesting speed represents the current domestic apple harvest robot development level.

Research directions
So far, many robot prototypes have been developed at home and abroad; due to the low harvesting efficiency, harvesting speed is much less than the artificial, so it still stays in the laboratory research stage. To make the apple harvesting robot reach the practical level, it is crucial to increase its harvesting efficiency, including harvesting rate and harvesting cycle.

Apple harvesting robots work in the nonstructural environment of the orchard, which usually requires the use of machine vision for environmental perception. To improve the harvesting efficiency of robot, on the one hand, and to improve the performance of harvesting robots, the information processing methods and control methods of harvesting robots are improved to achieve accurate and rapid recognition of the target fruit, which provides theoretical support for improving the performance of harvesting robots. On the other hand, to prolong the operation time of apple harvesting robot as the goal, the nighttime operation mode of the apple harvesting robot is studied to provide a theoretical basis and technical support for realizing apple’s all-weather machine harvesting.

Because the growth environment of harvesting objects changes with time and space, the operating environment of robot is unstructured and uncertain, and it needs to adapt to multiple environments. If the texture, shape, and so on of the fruit to be harvested up differ greatly, the harvesting robot needs to be “carefully” handled to avoid fruit damage. At the same time, harvesting robot needs to have good versatility and programmability but also need to consider the cost.

Basic architecture
Apple harvesting robots generally consist of the following four parts: the manipulator (including the mechanical arm and the end actuator), the visual system, the control system, and the walking device.

The visual system is equivalent to the eyes of human beings to identify and locate the objects and obstacles. The robot arm is equivalent to the human arm, and the end effector is regarded as a hand for harvesting the target object. The robot arm is regarded as an arm and is used to guide the end effector to avoid the obstacle and harvest up and store the target fruit. The control system is equivalent to the human brain and nerve center to achieve overall control of the robot. The walking device is used to carry a robot close to fruit trees or vegetable plants, which is equivalent to a human leg. The harvesting efficiency of the harvesting robot is closely related to the working performance of the above components. Figure 1 shows the architecture of the apple harvesting robot conceived by the research team.Operation process
In general, the robot harvesting operation process is as follows: the harvesting robot approaches the plant through the walking device, the robot’s vision system identifies and locates the target fruit, the robotic arm guides the end effector to avoid the obstacle and approaches the harvesting target, the end effector harvests the target fruit, and the robot arm and the end effector store the harvested fruit. Figure 2 shows the control system of apple harvesting robot.

In the whole process of harvesting, the accuracy and speed of target fruit recognition and positioning become the bottleneck restricting the harvesting efficiency of the robot, which is mainly manifested by the amount of time taken for the recognition of the target fruit when the leaves are covered and overlapped, low recognition accuracy, and so on, and it is also more difficult to recognize the fruit during night time.

Overview of apple harvesting robot
Since the French started researching apple harvesting robots, with the gradual development of apple planting and the scientific management of production and with the help of information technology, many scholars at home and abroad related to apple harvesting robot set off a new upsurge in the study and made greater progress.

The apple harvesting robot developed by d’Esnon adopts a three degree of freedom (DOF) coordinate robot,3 two direct motion joints, and a rotary joint, so that the end effector can be rotated to a certain angle to harvest the target fruit. The actuator uses a plurality of flexible fingers, which do not need to consider the direction of the fruit pedicle, and far-infrared filters are used to assist target fruit recognition. Korean researchers have developed an apple harvesting robot7 that uses a four-DOF manipulator, three rotary joints, and one mobile joint; uses a three-finger gripper as an end effector; and has a pressure sensor at the palm of the hand, which helps to avoid possible damage to the fruit. Using a charge-coupled device camera and photoelectric sensor to identify the target fruit, the detection rate of the target fruit on the outer layer of the canopy is about 85%, and a fruit collection bag is placed under the end effector to shorten the time taken for the fruit harvesting. The time of placing is reduced, and then increase the harvesting speed, the robot does not propose a method of identifying the shaded fruits of the branches and leaves, and during the harvesting process, it is impossible to bypass the obstacles to harvest up the apples.

The apple harvesting robot developed by Belgium5 adopts a six-DOF robot and can move horizontally and vertically to expand the work scope. To reduce the damage to the fruit, a flexible end effector is adopted and pneumatically used to improve the capture speed and the camera is installed in eye-in-hand mode, and the distance between the end effector and the fruit is calculated by triangulation. However, the robot is hauled by the tractor, and the bulk is a bit bulky and the harvesting operation is not flexible.

Gu designed an intelligent fruit harvesting robot8 and conducted an on-site comprehensive experiment in the Feng County, Jiangsu Province. The harvesting robot can complete operations such as autonomous navigation, autonomous harvesting, and independent loading, and intelligent coordinated control can be realized between the mobile platform, robot arm, and end effector. The system performance is stable, the recognition rate for mature fruits is 81.73%, the harvesting rate is 86.92%, and harvesting period is 9.5 s. Zhang designed a manipulator for the apple harvesting robot and studied the control stability of the manipulator.9 The control area was divided into stretching area and harvesting area to ensure that the manipulator could smoothly reach the harvesting. To determine the area and controllability of the system, the experiment shows that after the robot reaches the harvesting area, the required stabilization time is less than 2 s. Feng introduced the laser technology to the apple harvesting robot and designed a laser vision system to measure the distance to the target. The three-dimensional scan of the target scene can be used to analyze the spatial geometry and the relationship between the fruits and branches.10 Bao has developed a pneumatic flexible apple harvesting robot end effector that uses a pneumatic flexible actuator as a curved joint. The output force of the end effector is relatively large and it can firmly grasp the target fruit and has a good flexibility.11 In an apple harvesting robot developed by Zhao, the robotic manipulator is a 5° series joint with integral lifting and telescopic function of the arm and grasped under laboratory conditions. The success rate is 80% and the harvesting period is 15 s. The robot prototype is shown in Figure 3.Precise recognition for target fruit
The target of the apple harvesting robot and the recognition of the obstacles provide the status information of the harvesting operation to the visual servo system. The accuracy and real-time performance of robots directly affect the performance of the servo system, which, in turn, restricts the harvesting efficiency. The core of the research is to accurately identify the fruits of the target, break through the technological bottlenecks, and improve its harvesting efficiency. The recognition accuracy of the target fruit, the ability to accurately harvest, and the visual servo control performance largely constrain the harvesting efficiency of harvesting robots.12

Here, we discuss from the perspective of monocular, binocular vision system, overlapping, and oscillating fruits.

Monocular vision system recognition
Monocular recognition system research is relatively mature and has achieved good application effects in many fields. It is simple and easy to use, and in the recognition process of the target fruit and obstacles, the monocular color vision function is mostly used, and the division of color images is premised. However, its biggest drawback is that it is difficult to obtain the depth information of the target fruit in the application, and it is difficult to locate the fruit.

In the color image-based segmentation method, the Otsu automatic threshold method and the image feature segmentation algorithm based on color feature clustering are better in real-time performance.13 Ma combined a quantum genetic algorithm (GA) and a fuzzy neural network to establish a combined target fruit recognition algorithm. The new algorithm has a global search and self-adaptive ability and the recognition rate of this algorithm for unequal color apple fruits can reach 100%, and the illumination of uneven fruit recognition rate is 96.86% and took 1.72 s.14 Kelman determined the edge of the apple by the convexity detection of the image of the fruit tree and used the least-squares constraint mechanism to perform 3-D modeling. The positioning accuracy of the overlapping apples was 94%, but the processing time required about 2 min, poor real-time performance.15 Wachs used the maximum mutual information of infrared image and color image to extract the visual features of high and low levels, thereby detecting “green” apples in the foreground of the fruit tree crown, and the recognition rates of the two features can reach 54% and 74%, as shown in Figure 4. Depth information acquisition
The acquisition of depth information for fruits and obstacles is more complicated, mainly through the active ranging method, such as Feng Juan people, respectively, using laser vision system and based on the optical detection technology combination of depth camera and red, green, and blue (RGB) camera capture orchard environment of multisource images, which use the speeded up robust features image registration algorithm, the running time of 1.0305 s.10,17 However, the devices are expensive and bulky and are relatively difficult to install in apple harvesting robots. Wang used binocular vision to locate lychees in unstructured different lighting and random occlusion environments. First, the image was repaired using wavelet transform (WT), then segmented by K-means algorithm, and finally tagging was used for matching. The road has increased significantly, and the error is not significant.18 This method can be used to refer to apple image positioning in multiple environments.

Some scholars have attempted to use passive ranging methods, such as Rakun used a stereo matching method based on image registration to achieve 3-D reconstruction of green apples.19 Liu used the Kinect camera to obtain the original three-dimensional point cloud of fruit trees under different viewing angles, proposed an initial point cloud initial registration algorithm before the most recent iterative algorithm, effectively improved the accuracy and stability of point cloud registration, and constructed the three-dimensional points of fruit trees cloud morphology model.20 Cai obtained stereoscopic image disparity maps through the normalized cross-correlation method and then extracted the feature points of the branch skeletons by the multiline segment approximation method. Using the 12 prisms at the origin of the space coordinates to construct each segment of the branch module and to generate a virtual fruit tree, the total operation time is required 876 ms.21 However, in this passive range finding method, there are some branches in the process of reconstruction, such as disorder of branch construction or loss of branch information. Tian proposed a fast recognition and location of target fruit based on depth information, gradient vector field is obtained from depth image, the divergent vector is rotated clockwise by 90°, and the vorticity center is apple’s center. In RGB space, the graph-based segmentation is optimized to obtain superpixel regions. Scan the maximum radius of superpixel area where the center of apple is located and fit the target fruit, it is shown in Figure 5.22 Li used binocular stereo vision technology to obtain the three-dimensional position of the apple and improved the matching accuracy of the two pictures by reducing the search range and the range error was 5%.23 However, the actual harvesting of the environment is far more complicated than the experimental conditions, the time consumption will obviously increase, and the real-time performance will also be significantly worse.Overlap or shading fruit processing
Apple fruit grows under natural state, posture, and changeful, and because of the problem of the angle of the harvesting robot, the collected apple images are also varied and polymorphic, such as unobstructed, foliage blocked, overlapping, and the like. The processing of overlapping apple images is still a difficult problem, attracting the attention of researchers. Image segmentation is the premise of feature extraction and target recognition; the results have a direct impact on the progress of follow-up work.24–26 Feature extraction starts from an initial set of measured data and builds derived values (features) intended to be informative and nonredundant, facilitating the subsequent learning and generalization steps and in some cases leading to better human interpretations.27–30

Song first used K-means clustering to segment overlapping apple images and processed the morphological processing of the target fruit to extract the continuous smooth contour curve of the convex hull of the target fruit edge. The center and radius of the contour curve were calculated to identify and locate overlapping fruits. Then, using the Spline interpolation method to reconstruct the occlusion target, the average positioning error of the target fruit obtained by this method is about 14.15%, and the average target coincidence is 85.08%.31 Jia proposed an apple recognition based on pulse-coupled neural network (PCNN) and GA-Elman algorithm, the recognition rate of overlapping fruit and obscured fruit can reach up to 88.67% and 93.64%, and the total recognition rate reaches up to 94.88%.32 Xu proposed an overlapped apple target segmentation method combining the Snake model and corner detection and segmented 20 overlapping apples with an average error of 6.41.33 Wang first used the K-means cluster segmentation method to extract the target fruit region and then used the Ncut algorithm to extract the outline of the target fruit. Finally, the contour was reconstructed by the Spline interpolation method. Experiments were performed on 20 overlapping fruit images to calculate the segmentation error, and the mean value of coincidence was 5.24% and 93.81%.34 Zhao used an extremum method to achieve overlapping fruit positioning algorithm. Firstly, the target fruit area was segmented by color difference method or K-means method and then hole filling and contour extraction were performed. Finally, the minimum distance from the inner point to the outline edge was calculated. The maximum value is determined to determine the center of the circle and the radius to complete the recognition and positioning of the target fruit.35 Barnea conducted a related study on the recognition of the fruit of the same color under unstable light, and the recognition of the shaded fruits, and proposed a 3-D detection model based on RGB color features and related shape features.36 This model can be used as a reference for studying the same color apple images.

The mutual overlapping and blocking of the target fruit directly affect the recognition effect and the positioning accuracy of the target fruit to a certain extent. The above method has a better treatment effect on the fruits that are slightly overlapped or shaded. However, there is still no good solution to the large overlapping area of the fruit and how to improve the recognition rate and positioning accuracy of severely overlapped fruits still needs further study.

Dynamic fruit processing
Most of the above research are based on the recognition of static apple images, and in the actual operation process, due to disturbances such as outside the wind or mechanical collision will cause the oscillation of target fruit, thereby affecting the target recognition of fruit. Therefore, the environmental information needs to be updated in time, and it is urgently needed to conduct research on the recognition of dynamic targets and environments.

Lv used the correlation information between the images to narrow the area to be processed and used the optimized template matching algorithm to track and identify the image of the subsequent frame. Finally, the target fruit was identified and the average processing time was 0.74 s, and the recognition time was reduced by 36%.37 For the oscillating fruits, fast Fourier transform modeling was performed by extracting the two-dimensional centroid coordinates, the oscillation period and the depth distance of the oscillating fruit were calculated, and the stroke speed of the direct harvesting joint of the apple harvesting robot was calculated, and the harvesting success rate was 84%.38 Zhao performed a prejudgment of the motion path of the robot to reduce the scope of the next image processing and used the normalized cross-correlation fast matching algorithm to identify overlapping apple images. The matching time was 0.133 s, which was 28.1% less than that without prediction.39

In addition, Liu studied the problem of vibration in the harvesting process of the grape harvesting robot, proposed a simulation model of the spike vibration for the input of the cob axis, and used this model to analyze the effect of different excitation methods and different harvesting stages on the vibration of the ear.40 This also provides ideas for studying the oscillation of apples, and it can be used as a reference for further verification.

The recognition methods of these dynamic goals have improved the recognition speed under the premise of ensuring the recognition accuracy, but there is still a long distance from the requirement of fast visual servo. But it is worth noting that in recent years, the rapid recognition of dynamic targets and other fields of matching technology have developed rapidly, which provides a good reference for the recognition of dynamic fruits. The recent literatures about real-life applications of contemporary automation techniques in different fields give us new inspiration, using other intelligent computation41–43 to optimize neural network, to get more superior model; at the same time, we try to use deep learning algorithm44–47 to recognize the apple target fruit.

Night operation
Another way to increase the harvesting robot’s harvesting efficiency is to try its all-weather operation, which is to achieve a nighttime environment. Harvesting robots is a highly automated work machine, so the harvesting robot’s working time can be extended to maximize its effectiveness. Night work is affected by factors such as ambient light, temperature, and humidity, which makes it difficult to acquire and process images. Therefore, the basic premise of the nighttime study of apple harvesting robots is how to obtain accurate night image information. At present, there are relatively few domestic and foreign studies on night images of orchards, mainly involving the configuration of auxiliary lighting devices, night image preprocessing, night image target recognition, and so on. However, some progress has been made in this area in recent years.

Supplementary light
To adapt to the change of ambient light, the vision system of the fruit and vegetable harvesting robot under natural environment needs some accessories to assist in addition to the main image sensors. These auxiliary devices mainly include artificial light sources and filters. The use of an artificial light source can reduce the effect of light illumination on the recognition of the target fruit, and a filter is used to ensure that the sensitive wavelength of the image sensor can pass through the filter and be incident on the image sensor while filtering out incident light in other wavelengths.

Van Henten used a xenon lamp to eliminate ambient light interference when studying cucumber harvesting robots. In addition, the two cameras used 850 nm and 950 nm filters to obtain near-infrared images.48 Guo studied the visual system of the strawberry harvesting robot and used four fluorescent lamps for auxiliary lighting to minimize the influence of ambient light.49 Hayashi studied the strawberry harvesting robot and supplemented the light in the visual system, and the light source used five sets of light sources composed of 120 light-emitting diodes (LEDs). In addition, linear polarization filters were used in both the auxiliary light source and the camera to improve the collected image quality.50 Xiang proposed a lighting system based on the ratio between the category-to-class variance and the intraclass variance based on the foreground and background as an evaluation index, with the aid of the orthogonal experiment, the design with tomato harvesting robot lighting system, and the optimal combination for the fluorescent lamp and diagonal layout.51

These applications have provided inspiration for the illumination design of apple harvesting robots at night. Jia used incandescent lamps, fluorescent lamps, and LEDs to assist in obtaining three different artificial light sources to obtain images of apples at night and launched a series of studies on them, eventually screening incandescent lamps as an auxiliary light source for apple harvesting robots.52

These studies have achieved very good results in increasing the image quality by adding auxiliary equipment under low-light conditions. The research is worthy of further reference and verification in the future research of apple harvesting robots to obtain more suitable auxiliary lighting equipment. In addition, we should consider how the auxiliary equipment is arranged on the harvesting robot.

Night image enhancement
Due to the effects of ambient light, temperature, humidity, and other factors, nighttime image acquisition is easy to be disturbed by noise, so it is necessary to reduce the noise of nighttime images. At present, there is no effective method to determine the type of noise contained in night images, which also makes it difficult to reduce the noise. However, some literatures53–55 believe that noise contained in night images is based on Gaussian noise.

At present, the removal of Gaussian noise is still a difficult problem in image processing. Under the efforts of many scholars, related research on noise reduction of Gaussian noise have been carried out.56 Yan proposed a local evolution based on clustering and genetic programming, the adaptive filtering method removes Gaussian and salt-and-pepper noise in natural images, and the resulting image quality is significantly improved.57 Talebi proposed a global filtering image denoise method, in which each pixel in the image was estimated, making various noise reduction filters efficiently globally optimized.58 These studies all give inspiration to the research of noise reduction in night image Gaussian noise. Some scholars have conducted related research on night image denoising. Peng proposed a night image denoising method combining mathematical morphology and median filtering for nighttime image noise in fishery monitoring.59 Ji proposed a Retinex image enhancement algorithm with edge-preserving characteristics based on guided filtering for nighttime image quality, which has improved the nighttime image enhancement and runtime efficiency.60 Yang proposed an image double-platform histogram enhancement algorithm under nighttime low illumination conditions.61 Jia used apple harvesting robot as the research object and used the differential image method to determine the characteristics of nighttime images. He proposed a series of methods for denoising the night image of apple62 and used WT and independence. Independent component analysis (ICA) introduces night image noise reduction and proposes the use of fuzzy theory, fusion algorithm, and particle swarm optimization (PSO) to improve the noise reduction performance of the algorithm. The noise reduction effect of night images and the concept of relative peak signal-to-noise ratio are also proposed to objectively evaluate the noise reduction ability of each algorithm.

However, in practical applications, the removal of Gaussian noise and the processing of signal details are not ideal. For example, the signal-to-noise ratio of the low-noise image obtained is still low, the loss of texture information is relatively large, and the edge information is blurred.

Image recognition in low illumination
Night image recognition is relatively early in other fields such as intelligent transportation and license plate recognition63 and has also achieved relatively satisfactory results. At present, there are relatively few domestic and foreign research on night images for agriculture. But with the efforts of many scholars, some progress has been made.

Payne used man-made light sources to collect nighttime images of near-mature mangoes in mango plantations and then extracted color features and shape texture features of YCbCr color space to identify the number of mangoes and estimate mango production.64,65 Font used the artificial light source to collect the night images of ripe grapes in the grape orchard and converted them to the RGB color space. The number of grapes was determined by calculating the spherical reflection peaks on the grape surface.66 For apple’s nighttime images, Zhang equipped a color camera with a ring flash for image acquisition at night, by analyzing the characteristics of green apples and near-color backgrounds, a classifier was designed based on the color characteristics to achieve a green background. The recognition rate of apple in the night environment can reach 89.3%; the algorithm takes 3.14 s on average.67 Zhao used the improved RG color difference segmentation method to repair the bright reflective regions in apple night vision images using a quadratic segmentation method and proposed a method for apple night image recognition, and the correct recognition rate of the algorithm reached 83.7%.68 Fu used the RG color model to segment the nighttime images of the collected kiwifruit and then detected the target fruit using the Canny operator; the experimental results showed that the optimal illumination of the artificial light source was 30–50 lx and the recognition rate was 88.3%.69 Liu performed ordinary least squares (OLS) space fitting on the main scene samples of the night image in the RGB space, then established a threshold segmentation model based on the distance from the sample point to the straight line to segment the image, and finally used the same methods correct the shaded area around the apple, and the recognition rate can reach 90%.70

In general, the work research base in orchard nighttime environment is relatively weak, and the recognition accuracy and speed are still far from meeting the requirements for harvesting robots on-site orchard operations at night. To realize the apple harvesting robot all-weather operation and maximize its performance, it is necessary to make in-depth research on the accurate recognition of apple’s night image.

Intelligent computing in harvesting robots
Intelligent computing is borrowed from the inspiration of the laws of the natural world, described by a specific mathematical model, and designed algorithms for problem-solving. It focuses on the imitation of human or other biological intelligence behaviors and draws on useful laws and principles. Compared with traditional calculation methods, intelligent computing has parallelism, self-adaptive ability and self-learning ability, and so on. It can solve many problems without too much domain knowledge, especially for some large-scale complex problems.

The emerging intelligent computing methods are introduced into the emerging field of harvesting robots, and advanced intelligent algorithms are used to optimize the target recognition or intelligent control involved in harvesting robots to increase the operating efficiency of harvesting robots. Although other relevant fields have achieved gratifying results, their theories can be used as reference for harvesting robots to advance the theory of harvesting robots. But direct research in this area is relatively less, and in the research that has been carried out and made great progress, mainly focusing on harvesting path planning and target fruit recognition.

Path planning
Harvesting robots according to the perception of the environment plan a safe operation route to complete the harvesting task efficiently, including obstacle avoidance, harvesting order, walking, and so on. With advanced intelligent computing theory, path planning is more reasonable and efficient.71,72

In the research of harvesting path planning, Yuan applied the intelligent algorithm to the path planning of harvesting robots. Firstly, the path planning problem in apple harvesting process was transformed into a three-dimensional traveling salesman problem and then solved, and the finite field information was constructed. The ant colony optimization (ACO) adaptive update is improved to obtain better optimization results.73 Plebe viewed the path planning problem of fruit harvesting robots with dual independent robotic arms as a twin traveling salesman problem and optimized it with a self-organizing map model to avoid tangling or collision of the twins. The experimental results show that after optimization, a reliable harvesting sequence plan is obtained.74

Yang proposed a method of constructing kinematics equations for hybrid harvesting robots based on spin theory and concluded that the maximum absolute error of the end effector in each coordinate axis in the basic coordinate system was greatly reduced to meet the harvesting requirements and provided reference for control strategy and trajectory planning study of hybrid harvesting machines.75

Target recognition
In the target fruit recognition study, Gongal reviewed the detection and location of the target fruit of harvesting robots, which involved the role of intelligent computing in the recognition process.76 Wang proposed an adaptive PCNN algorithm for the segmentation of cucumber images to solve the problem of near-color system segmentation for near-colored fruits and vegetables.77 Ma proposed an apple fruit recognition algorithm based on the combination of quantum genetic neural network and Fuzzy neural network, aiming at the ambiguity and uncertainty of the color pixels in apple color image boundary pixels, and the established recognition model has high-speed stability and good robustness.14 Jia proposed an ICA noise reduction algorithm (PSO-ICA) based on PSO for the noise of apple images at night, which was used to reduce the noise of apple night images; the speed of noise reduction algorithm was improved through intelligent optimization and noise reduction capability.62 Jia used radial basis function (RBF) for the recognition of apple images and optimized it by using GA and least mean square (LMS) algorithm. RBF-LMS optimizes neural network algorithms to improve recognition accuracy and operating efficiency of neural network recognition models.78 The segmentation accuracy of apple images affected by different noises was above 98% and the robustness of the algorithm is enhanced, built a fast and accurate target fruit detection system using deep neural networks to provide technical support for estimating production and harvesting.79 Zhou used color features in both RGB and hue, saturation, and intensity space for apple detection (Figure 6). The difference between RGB color channels was used as a measure to segment red and green apples from the background. Further, a threshold value in saturation channel was also used to segment red apples.Fruit and vegetable harvesting robot
Since the 80s of the last century, based on the rapid development of digital image processing technology and artificial intelligence theory, fruit and vegetable harvesting robots have opened a new chapter. With the further promotion of information technology, the advancement of the level of agricultural equipment has been advanced and the agricultural robot technology has reached a new height. Its role has gradually emerged in the modern agricultural production process.85–87 Many kinds of prototypes have been successfully developed under the efforts of many scholars at home and abroad. In a few developed countries, some fruit and vegetable harvesting robots have been widely used in the greenhouse.88–90

Some research foundations and key technologies of these fruit and vegetable harvesting robots can be applied in many fields, and they can also provide references for the research of apple harvesting robots. The following focuses on several relatively mature fruit and vegetable harvesting robots.

Same color fruit recognition
There are many varieties of existing apples, and the colors of mature fruits are also different, such as red Fuji, yellow gold handsome, green apple, and so on. At present, the research of apple harvesting robots is mostly based on Fuji harvesting targets and the research on green fruits is relatively rare, because the fruit color is similar to the color of the background leaves, it is difficult to identify the target fruit and the recognition efficiency is relatively low. This type of fruit is similar to the color of the foliage, we call it the same color. Fruits of the same color are difficult to identify from a purely color perspective and need to be treated differently or try other characteristics.

Therefore, Zhang equipped a color camera with a ring flash for image acquisition of apple trees. By analyzing the characteristics of the green apple and the near-color background, a classifier was designed based on the color characteristics to achieve the recognition of green apples in a near-color background. With a recognition rate of 89.3%, the algorithm takes an average of 3.14 s.67 In addition, Barnea conducted a related study on the recognition of fruit of the same color under unstable light and the recognition of the shaded fruits proposed a 3-D detection model based on RGB color features and related shape features.36 Both of these methods propose corresponding processing in terms of color features to distinguish the target fruit from the background.

For the research on the recognition of the same color fruits, other harvesting robots have accumulated certain research results for us to learn from. For example, Van Henten developed a 7°-free cucumber harvesting robot prototype,91 using multispectrum to identify cucumbers, and the recognition rate can reach 80%. Lee used a spectrometer to measure the spectral reflectance of green-skin citrus and proposed a method for recognizing green-skin citrus, with a recognition rate of 84.5%.92 Both of these models use different spectral reflectance of the target fruit and background to achieve the target fruit recognition, which can be used as a reference for studying the same-color apple images.

The recognition of fruit of the same color is a difficult problem; most research are based on differences in color characteristics or spectral reflectance. Although they have achieved certain results, they are all applied to the recognition of specific fruits and vegetables, and the essential characteristics of fruit need to go further study. In addition, infrared light can be used to treat the same color of fruit.

Tomato harvesting robot
The main problems existing in the current tomato harvesting robots are the recognition of mature fruits that are severely obstructed by stems and leaves is still difficult, and the obstacle avoidance of robot arm is also a problem, the grasping force of the end effector and the accurate positioning of the fruit, and so on. Figure 7 shows a tomato harvesting robot prototype.